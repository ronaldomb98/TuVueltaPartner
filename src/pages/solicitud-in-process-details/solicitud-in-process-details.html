<ion-header>
    <ion-navbar color="primary">
      <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
      <ion-title text-center>Detalles solicitud</ion-title>
    </ion-navbar>
</ion-header>
<ion-content>
  <div  *ngIf="solicitudDetails" class="details">
    <ion-grid>
      <ion-row>
        <ion-col col-12>
            <ion-card>
                <ion-item>
                    <ion-card-header item-start>
                      Descripcion solicitud
                    </ion-card-header>
                    <button ion-button default icon-start item-end (click)="goBack()">
                        <ion-icon name="arrow-back"></ion-icon>
                        volver
                      </button>
                </ion-item>
              <ion-card-content>
                    <ion-grid>
                      <ion-row>
                        <ion-col col-6>
                          <ion-item>
                            <ion-label stacked> <ion-icon name="pin" color="primary"></ion-icon> Total de Km</ion-label>
                            <ion-input readonly [value]="solicitudDetails.payload.val().DistanciaTotal / 1000"></ion-input>
                          </ion-item>
                        </ion-col>
                        <ion-col col-6>
                          <ion-item>
                            <ion-label stacked>Estado </ion-label>
                            <ion-input readonly [value]="solicitudDetails.payload.val().Estado"></ion-input>
                          </ion-item>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col col-12>
                          <button block ion-button color="primary" (click)="changeStateToEnSitio()" *ngIf="solicitudDetails.payload.val().Estado == 'EnProceso'">En Sitio</button>
                          <button block ion-button color="primary" (click)="changeStateToDespachado()" *ngIf="solicitudDetails.payload.val().Estado == 'EnSitio'">Despachado</button>
                          <button block ion-button color="primary" (click)="changeStateToDondeElCliente()" *ngIf="solicitudDetails.payload.val().Estado == 'Despachado'">Donde El Cliente</button>
                          <button block ion-button color="primary" (click)="changeStateToDevolucionDatafono()" *ngIf="solicitudDetails.payload.val().Estado == 'EnPunto' && solicitudDetails.payload.val().esPagoConTarjeta == true">Devolucion Datafono</button>
                          <button block ion-button color="primary" (click)="changeStateToFinalizado()" *ngIf="solicitudDetails.payload.val().Estado == 'EnPunto' && solicitudDetails.payload.val().esPagoConTarjeta == false">Finalizar</button>
                          <button block ion-button color="primary" (click)="changeStateToFinalizado()" *ngIf="solicitudDetails.payload.val().Estado == 'DevolucionDatafono' && solicitudDetails.payload.val().esPagoConTarjeta == true">Finalizar</button>              
                          <button block (click)="relaunch(solicitudDetails)" *ngIf="solicitudDetails.payload.val().fechaCompra && ((solicitudDetails.payload.val().fechaCompra + 30000) > currentTime ) && solicitudDetails.payload.val().Estado == 'EnProceso'" ion-button color="yellow">
                              Relanzar {{ (((solicitudDetails.payload.val().fechaCompra + 30000) - currentTime) / 1000) | number:'2.0-0' }}
                            </button>
                            
                        </ion-col>  
                      </ion-row>
                    </ion-grid>
                  </ion-card-content>
              </ion-card>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
            <ion-card class="details">
                <ion-card-header text-center>
                  Direcciones
                </ion-card-header>
                <ion-card-content>
                    <ion-item>
                        <ion-label stacked><ion-icon name="pin" color="secondary"></ion-icon> Punto de Inicio</ion-label>
                        <ion-input readonly [value]="solicitudDetails.payload.val().puntoInicio"></ion-input>
                     </ion-item>
                      <button block ion-button outline color="secondary" (click)="openNavigator(true)">Ruta al punto de Inicio</button>
                      <ion-item>
                          <ion-label stacked> <ion-icon name="pin" color="danger"></ion-icon> Punto de Finalización</ion-label>
                          <ion-input readonly [value]="solicitudDetails.payload.val().puntoFinal"></ion-input>
                        </ion-item>
                        <button block ion-button outline color="danger" (click)="openNavigator(false)">Ruta al punto de Finalizacion</button>
                </ion-card-content>
              </ion-card>
        </ion-col>
      </ion-row>
      <ion-row>
          <ion-col>
              <ion-card>
                  <ion-card-header text-center>
                    Datos del domicilio
                  </ion-card-header>
                  <ion-card-content>
                    <ion-grid>
                      <ion-row>
                        <ion-col col-6>
                          <ion-item>
                            <ion-label stacked>Nombres</ion-label>
                            <ion-input readonly [value]="solicitudDetails.payload.val().Nombres"></ion-input>
                          </ion-item>
                        </ion-col>
                        <ion-col col-6>
                          <ion-item>
                            <ion-label stacked>Apellidos</ion-label>
                            <ion-input readonly [value]="solicitudDetails.payload.val().Apellidos"></ion-input>
                          </ion-item>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col col-6>
                            <ion-item>
                              <ion-label stacked>Celular</ion-label>
                              <ion-input readonly [value]="solicitudDetails.payload.val().Celular"></ion-input>
                            </ion-item>
                        </ion-col>
                        <ion-col col-6>
                            <ion-item>
                              <ion-label stacked>Telefono</ion-label>
                              <ion-input readonly [value]="solicitudDetails.payload.val().Celular"></ion-input>
                            </ion-item>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col col-12>
                          <ion-item>
                            <ion-label stacked>Descripción </ion-label>
                            <div>{{ solicitudDetails.payload.val().Descripcion }}</div>
                          </ion-item>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                          <ion-col col-12>
                              <ion-item>
                                  <ion-label stacked>Descripción Domicilio</ion-label>
                                </ion-item>
                                <div>{{ solicitudDetails.payload.val().DescripcionDomicilio }}</div>
                          </ion-col>
                        </ion-row>
                  </ion-grid>
                </ion-card-content>
                </ion-card>
          </ion-col>
        </ion-row>
    </ion-grid>
     
    </div>
</ion-content>